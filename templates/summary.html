{% extends "base.html" %}
{% block title %}<title>Обобщение</title>{% endblock %}
{% block content %}
<div class="bg-gray-100 min-h-screen flex flex-col mt-8">
  <section class="py-8">
    <div class="container mx-auto text-center px-4">
      <h1 class="text-4xl font-bold text-gray-800 mb-4">Обобщение текста</h1>
      <p class="text-xl text-gray-600 mb-4">Введите текст в поле ниже, чтобы получить краткое содержание.</p>
    </div>
  </section>
  
  <section class="bg-gray-100 w-full">
    <div class="container mx-auto flex flex-col md:flex-row md:justify-between px-4">
      <div class="md:w-1/2 mb-8 ml-4 mr-4">
        <div class="mb-8">
          <form id="text-form" action="/summarize" method="post">
            <div class="flex flex-col md:flex-row mt-4 mb-8">
              <div class="w-full md:mr-4">
                <label for="source-language" class="block text-gray-700 text-sm font-bold mb-2">Язык текста:</label>
                <select name="source_language" id="source-language" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg w-full" required>
                  <option value="" disabled selected>Выберите язык</option>
                  <option value="af">Afrikaans</option>
                  <option value="ar">Arabic</option>
                  <option value="hy">Armenian</option>
                  <option value="az">Azerbaijani</option>
                  <option value="be">Belarusian</option>
                  <option value="bs">Bosnian</option>
                  <option value="bg">Bulgarian</option>
                  <option value="ca">Catalan</option>
                  <option value="zh">Chinese</option>
                  <option value="hr">Croatian</option>
                  <option value="cs">Czech</option>
                  <option value="da">Danish</option>
                  <option value="nl">Dutch</option>
                  <option value="en" selected >English</option>
                  <option value="et">Estonian</option>
                  <option value="fi">Finnish</option>
                  <option value="fr">French</option>
                  <option value="gl">Galician</option>
                  <option value="de">German</option>
                  <option value="el">Greek</option>
                  <option value="he">Hebrew</option>
                  <option value="hi">Hindi</option>
                  <option value="hu">Hungarian</option>
                  <option value="is">Icelandic</option>
                  <option value="id">Indonesian</option>
                  <option value="it">Italian</option>
                  <option value="ja">Japanese</option>
                  <option value="kn">Kannada</option>
                  <option value="kk">Kazakh</option>
                  <option value="ko">Korean</option>
                  <option value="lv">Latvian</option>
                  <option value="lt">Lithuanian</option>
                  <option value="mk">Macedonian</option>
                  <option value="ms">Malay</option>
                  <option value="mr">Marathi</option>
                  <option value="mi">Maori</option>
                  <option value="ne">Nepali</option>
                  <option value="no">Norwegian</option>
                  <option value="fa">Persian</option>
                  <option value="pl">Polish</option>
                  <option value="pt">Portuguese</option>
                  <option value="ro">Romanian</option>
                  <option value="ru">Russian</option>
                  <option value="sr">Serbian</option>
                  <option value="sk">Slovak</option>
                  <option value="sl">Slovenian</option>
                  <option value="es">Spanish</option>
                  <option value="sw">Swahili</option>
                  <option value="sv">Swedish</option>
                  <option value="tl">Tagalog</option>
                  <option value="ta">Tamil</option>
                  <option value="tt">Tatar</option>
                  <option value="th">Thai</option>
                  <option value="tr">Turkish</option>
                  <option value="uk">Ukrainian</option>
                  <option value="ur">Urdu</option>
                  <option value="vi">Vietnamese</option>
                  <option value="cy">Welsh</option>
                </select>
              </div>
              <div class="w-full mt-4 md:mt-0 md:ml-4">
                <label for="target-language" class="block text-gray-700 text-sm font-bold mb-2">Язык краткого содержания:</label>
                <select name="target_language" id="target-language" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg w-full" required>
                  <option value="" disabled selected>Выберите язык</option>
                  <option value="af">Afrikaans</option>
                  <option value="ar">Arabic</option>
                  <option value="hy">Armenian</option>
                  <option value="az">Azerbaijani</option>
                  <option value="be">Belarusian</option>
                  <option value="bs">Bosnian</option>
                  <option value="bg">Bulgarian</option>
                  <option value="ca">Catalan</option>
                  <option value="zh">Chinese</option>
                  <option value="hr">Croatian</option>
                  <option value="cs">Czech</option>
                  <option value="da">Danish</option>
                  <option value="nl">Dutch</option>
                  <option value="en">English</option>
                  <option value="et">Estonian</option>
                  <option value="fi">Finnish</option>
                  <option value="fr">French</option>
                  <option value="gl">Galician</option>
                  <option value="de">German</option>
                  <option value="el">Greek</option>
                  <option value="he">Hebrew</option>
                  <option value="hi">Hindi</option>
                  <option value="hu">Hungarian</option>
                  <option value="is">Icelandic</option>
                  <option value="id">Indonesian</option>
                  <option value="it">Italian</option>
                  <option value="ja">Japanese</option>
                  <option value="kn">Kannada</option>
                  <option value="kk">Kazakh</option>
                  <option value="ko">Korean</option>
                  <option value="lv">Latvian</option>
                  <option value="lt">Lithuanian</option>
                  <option value="mk">Macedonian</option>
                  <option value="ms">Malay</option>
                  <option value="mr">Marathi</option>
                  <option value="mi">Maori</option>
                  <option value="ne">Nepali</option>
                  <option value="no">Norwegian</option>
                  <option value="fa">Persian</option>
                  <option value="pl">Polish</option>
                  <option value="pt">Portuguese</option>
                  <option value="ro">Romanian</option>
                  <option value="ru">Russian</option>
                  <option value="sr">Serbian</option>
                  <option value="sk">Slovak</option>
                  <option value="sl">Slovenian</option>
                  <option value="es">Spanish</option>
                  <option value="sw">Swahili</option>
                  <option value="sv">Swedish</option>
                  <option value="tl">Tagalog</option>
                  <option value="ta">Tamil</option>
                  <option value="tt" selected >Tatar</option>
                  <option value="th">Thai</option>
                  <option value="tr">Turkish</option>
                  <option value="uk">Ukrainian</option>
                  <option value="ur">Urdu</option>
                  <option value="vi">Vietnamese</option>
                  <option value="cy">Welsh</option>
                </select>
              </div>
            </div>
            <textarea name="input_text" id="input-text" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-lg w-full h-64" minlength="500" maxlength="3000" placeholder="Введите текст (500-3000 символов)..." required></textarea>
            <button type="submit" class="bg-green-800 text-white px-6 py-3 rounded-lg w-full mt-4 md:w-auto">Обобщить</button>
          </form>
        </div>
      </div>
      <div class="md:w-1/2 mx-4">
        <div class="bg-green-800 p-4 rounded-lg">
          <h2 class="text-2xl font-bold text-white mb-4">Краткое содержание</h2>
          <textarea id="summary-text" class="w-full h-72 p-4 text-gray-600 rounded-lg" readonly></textarea>
        </div>
      </div>
    </div>
  </section>
</div>

<script>
  document.getElementById('text-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const form = e.target;
    const formData = new FormData(form);

    const response = await fetch(form.action, {
      method: 'POST',
      body: formData,
    });

    const summary = await response.json();
    document.getElementById('summary-text').value = summary.text;
  });
</script>
{% endblock %}
